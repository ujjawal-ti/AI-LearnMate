<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>LearnMate</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <style>
      body { 
        font-family: Arial, sans-serif; 
        margin: 0; 
        padding: 0; 
        display: flex; 
        flex-direction: column; 
        width: 400px; 
        height: 600px; 
        min-width: 400px; 
        min-height: 600px; 
      }
      header { 
        background: linear-gradient(135deg, #663399, #00C800); 
        color: white; 
        padding: 16px; 
        font-weight: 600; 
        font-size: 16px; 
        text-align: center; 
        position: relative;
      }
      header::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 16px;
        transform: translateY(-50%);
        width: 20px;
        height: 20px;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path d="M2 6 L22 14" stroke="%23ffffff" stroke-width="2" opacity="0.6"/><path d="M4 16 Q8 12 12 14 Q16 16 20 10" stroke="%23ffffff" stroke-width="3" fill="none"/></svg>') no-repeat center;
        background-size: contain;
      }
      #messages { 
        flex: 1; 
        padding: 16px; 
        overflow-y: auto; 
        background: #f7f7fb; 
        min-height: 400px; 
        max-height: 400px; 
      }
      .msg { 
        margin-bottom: 12px; 
        padding: 10px 14px; 
        border-radius: 10px; 
        max-width: 85%; 
        word-wrap: break-word; 
        line-height: 1.4; 
        font-size: 14px; 
      }
      .user { 
        align-self: flex-end; 
        background: #dcfce7; 
        margin-left: auto; 
        text-align: right; 
      }
      .assistant { 
        align-self: flex-start; 
        background: white; 
        box-shadow: 0 2px 4px rgba(0,0,0,0.1); 
        margin-right: auto; 
      }
      .small { 
        font-size: 11px; 
        color: #6b7280; 
        padding: 8px 16px; 
        text-align: center; 
        background: #f9fafb; 
        border-top: 1px solid #e5e7eb; 
      }
      footer { 
        padding: 16px; 
        display: flex; 
        gap: 10px; 
        background: white; 
        border-top: 1px solid #e5e7eb; 
      }
      textarea { 
        flex: 1; 
        min-height: 50px; 
        max-height: 100px; 
        resize: vertical; 
        padding: 12px; 
        border-radius: 8px; 
        border: 1px solid #d1d5db; 
        font-family: Arial, sans-serif; 
        font-size: 14px; 
        line-height: 1.4; 
      }
      textarea:focus { 
        outline: none; 
        border-color: #4f46e5; 
        box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.1); 
      }
      button { 
        padding: 12px 16px; 
        border-radius: 8px; 
        border: none; 
        background: #4f46e5; 
        color: white; 
        cursor: pointer; 
        font-weight: 600; 
        font-size: 14px; 
        min-width: 70px; 
      }
      button:hover { 
        background: #4338ca; 
      }
      button:active { 
        background: #3730a3; 
      }
    </style>
  </head>
  <body>
    <header>LearnMate</header>
    <div id="messages"></div>
    <div class="small">Context: <span id="page-context">Loading...</span></div>
    <footer>
      <textarea id="input" placeholder="Ask about this page..."></textarea>
      <button id="send">Send</button>
    </footer>

    <script src="popup.js"></script>
  </body>
</html>
